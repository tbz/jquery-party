/*
 * Copyright (c) 2009 Tobias Baaz <tobias@baaz.nu>
 *
 * Permission to use, copy, modify, and distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 */
(function(a){a.fn.party=function(b){var c={gutter:10,perPage:2,duration:"normal",nextLink:false,prevLink:false,disableLinks:true};if(b){a.extend(c,b)}if(isNaN(c.duration)){if(typeof a.fx.speeds[c.duration]==="undefined"){c.duration="normal"}c.duration=a.fx.speeds[c.duration]}this.each(function(){var k=a(this);k.html("<div>"+k.html()+"</div>");var h=a("div:eq(0)",k),d=a("img",k),n=d.eq(0),e=n.width(),m=n.height(),j=e+c.gutter,l=-1*j*(d.length-c.perPage),o,f,g,i;k.css({display:"block",width:((e+c.gutter)*c.perPage-c.gutter)+"px",height:m+"px",overflow:"hidden",position:"relative"});h.css({width:d.length*(e+c.gutter)+"px",position:"absolute",top:0,left:0});d.css({display:"block","float":"left","margin-left":c.gutter+"px"});n.css("margin-left",0);f=function(q){if(typeof q==="number"){o=q}else{var p=j*(q==="right"?-1:1);if(!h.is(":animated")){o=Math.round(parseInt(h.css("left"),10),0)+p}else{o+=p;h.stop(true)}}if(o>0){o=0}else{if(o<l){o=l}}h.animate({left:o+"px"},c.duration);if(c.disableLinks){if(o===0){i.addClass("party-disabled")}else{i.removeClass("party-disabled")}if(o===l){g.addClass("party-disabled")}else{g.removeClass("party-disabled")}}};k.bind("pageNext",function(){f("right")}).bind("pagePrev",function(){f("left")}).bind("pageFirst",function(){f(0)}).bind("pageLast",function(){f(l)});if(c.prevLink){i=a(c.prevLink).click(function(p){p.preventDefault();k.trigger("pagePrev")}).addClass("party-disabled")}if(c.nextLink){g=a(c.nextLink).click(function(p){p.preventDefault();k.trigger("pageNext")})}})}}(jQuery));